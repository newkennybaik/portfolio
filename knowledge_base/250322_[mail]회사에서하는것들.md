# Mail/Antispam Server Overview
- 메일/스팸차단 솔루션 업체에서 일하게 되면 구축할 줄 알아야하는 것들에 대한 정리.
- 실제 고객사들에서 사용중인 인프라 구조 및 지식들을 반영해서 구축함

# Steps

## Internal Infrastructure (사내 인프라 구성)
- VMWARE로 구축
	1. 192.168.136.128(138) (Rocky Linux 9.5) - 메일/스팸 서버 구축 (Master/Slave 서버 이중화)
	2. 192.168.136.129 (Rocky Linux 9.5) - DNS 서버를 구축해서 실제 내부에서 송수신 테스트 진행. 도메인: @baik.com
	3. Apahce 서버 - HTTP 트래픽 분산용
	4. Nginx 서버 - SMTP 트래픽 분산용
	
## Network Structure (네트워크 구성)
- VMnet 8(VMware NAT 서비스)를 이용한 192.168.136.0 대역의 사설 IP에서 공인 IP로 NAT되는 구조
- 내부에 DNS 서버를 구축해서 내부 서버 간 DNS 조회를 통해 도메인을 찾을 수 있도록 하려고 함
	- 송신자가 메일 외부에서 발송 -> 외부 DNS에서 내 도메인 조회 (공인 IP용) -> 내부 DNS에서 내 도메인 조회 (사설 IP용) -> 내 스팸서버에서 relay -> 내 메일서버로 수신
	- 메일은 위와 같은 방식으로 내 서버로 수신됨.
	- 외부 DNS 설정은 집 IP가 고정 IP가 아니고, 일반 가정용 ISP는 25번 포트가 막혀있을 수 있다고 하여 우선 보류
	- 메일/스팸도 같은 서버에 설치하려고 하고 포트만 달리 설정. (스팸 25, 메일 26)